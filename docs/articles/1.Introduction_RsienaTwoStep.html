<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="RsienaTwoStep">
<title>Introduction_RsienaTwoStep • RsienaTwoStep</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction_RsienaTwoStep">
<meta property="og:description" content="RsienaTwoStep">
<meta property="og:image" content="https://jochemtolsma.github.io/RsienaTwoStep/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RsienaTwoStep</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/1.Introduction_RsienaTwoStep.html">Introduction_RsienaTwoStep</a>
    <a class="dropdown-item" href="../articles/2.MinistepToTwostep.html">MinistepToTwostep</a>
    <a class="dropdown-item" href="../articles/3.RsienaWorkflow.html">RSienaWorkFlow</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JochemTolsma/RsienaTwoStep/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction_RsienaTwoStep</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JochemTolsma/RsienaTwoStep/blob/HEAD/vignettes/1.Introduction_RsienaTwoStep.Rmd" class="external-link"><code>vignettes/1.Introduction_RsienaTwoStep.Rmd</code></a></small>
      <div class="d-none name"><code>1.Introduction_RsienaTwoStep.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JochemTolsma/RsienaTwoStep" class="external-link">RsienaTwoStep</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: foreach</span></span></code></pre></div>
<style type="text/css">
.test {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  margin: 10px;
}

.test2 {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  margin: 10px;
  background-color: white;
  color: rgb(201, 76, 76);
}


h1, .h1, h2, .h2, h3, .h3 {
  margin-top: 24px;
}





.button1 {
  background-color: grey; /* Red */ 
  border: 2px solid black;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  /* border-radius: 12px; */
  width: 100%;
}

.button1:hover {
  box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);
}

.button1:active {
  border: 2px solid red;
}

pre {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  margin: 0px;
}

.watch-out {
  background-color: lightpink;
  border: 3px solid red;
  font-weight: bold;
}

.large {
  max-height: 1100px;
  overflow-y: auto;
  overflow-x: auto;
  width: 1100px;
}


body{ /* Normal  */
    font-size: 14px;
}

h1 { /* Header 1 */
    font-size: 20px;
  font-weight: bold;
}

h2 { /* Header 2 */
    font-size: 18px;
  color: DarkBlue;
}

h3 { /* Header 3 */
    font-size: 16px;
  color: DarkBlue;
}

blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 14px;
  border-left: 6px solid #eee;
  background-color:lightcyan
}

caption {
  font-size: 14px;
  color: black;
  font-weight: bold
}

pre.numberSource a.sourceLine {
  left: -1em;
}

</style>
<hr>
<div class="section level2">
<h2 id="data-sets">1. Data sets<a class="anchor" aria-label="anchor" href="#data-sets"></a>
</h2>
<p>Let us have a look at the build-in data sets of
<code>RsienaTwoStep</code>.</p>
<div class="section level3">
<h3 id="net1">1.1. net1<a class="anchor" aria-label="anchor" href="#net1"></a>
</h3>
<div class="section level4">
<h4 id="adjacency-matrix">1.1.1. Adjacency matrix<a class="anchor" aria-label="anchor" href="#adjacency-matrix"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net1</span></span>
<span><span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span></span>
<span><span class="co">#&gt;  [1,]    0    0    0    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt;  [2,]    0    0    1    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt;  [3,]    1    0    0    0    0    1    0    0    0     0</span></span>
<span><span class="co">#&gt;  [4,]    0    0    0    0    0    0    0    0    1     0</span></span>
<span><span class="co">#&gt;  [5,]    0    0    0    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt;  [6,]    0    0    0    0    0    0    0    0    1     1</span></span>
<span><span class="co">#&gt;  [7,]    1    0    0    0    0    0    0    0    0     0</span></span>
<span><span class="co">#&gt;  [8,]    0    0    0    0    0    0    0    0    0     1</span></span>
<span><span class="co">#&gt;  [9,]    0    0    0    1    0    0    0    1    0     0</span></span>
<span><span class="co">#&gt; [10,]    0    0    0    0    0    0    0    1    1     0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="plot">1.1.2. Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net1g</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_adjacency_matrix.html" class="external-link">graph_from_adjacency_matrix</a></span><span class="op">(</span><span class="va">net1</span>, mode<span class="op">=</span><span class="st">"directed"</span><span class="op">)</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/plot.igraph.html" class="external-link">plot.igraph</a></span><span class="op">(</span><span class="va">net1g</span><span class="op">)</span></span></code></pre></div>
<p><img src="1.Introduction_RsienaTwoStep_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="net2">1.2. net2<a class="anchor" aria-label="anchor" href="#net2"></a>
</h3>
<div class="section level4">
<h4 id="adjacency-matrix-1">1.2.1. Adjacency matrix<a class="anchor" aria-label="anchor" href="#adjacency-matrix-1"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net2</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="plot-1">1.2.2. Plot<a class="anchor" aria-label="anchor" href="#plot-1"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net2g</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_adjacency_matrix.html" class="external-link">graph_from_adjacency_matrix</a></span><span class="op">(</span><span class="va">net2</span>, mode<span class="op">=</span><span class="st">"directed"</span><span class="op">)</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/plot.igraph.html" class="external-link">plot.igraph</a></span><span class="op">(</span><span class="va">net2g</span><span class="op">)</span></span></code></pre></div>
<p><img src="1.Introduction_RsienaTwoStep_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="abm-ministep">2. ABM ministep<a class="anchor" aria-label="anchor" href="#abm-ministep"></a>
</h2>
<div class="section level3">
<h3 id="logic">2.1. Logic<a class="anchor" aria-label="anchor" href="#logic"></a>
</h3>
<ol style="list-style-type: decimal">
<li>sample ego<br>
</li>
<li>construct possible alternative future networks based on all possible
ministeps of ego<br>
</li>
<li>calculate how sampled ego evaluates these possible networks<br>
</li>
<li>Let the ego pick a network, that is, let agent decide on a
tie-change<br>
</li>
<li>GOTO 1 (STOPPING RULE: until you think we have made enough
ministeps)</li>
</ol>
</div>
<div class="section level3">
<h3 id="possible-networks-after-ministep">2.2. Possible networks after ministep<a class="anchor" aria-label="anchor" href="#possible-networks-after-ministep"></a>
</h3>
<p>Let us suppose we want to know what the possible networks are after
all possible ministeps of one actor part of <code>net2</code>. That is,
let us assume that it is ego#2’s turn to decide on tie-change. What are
the possible networks?</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">options</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_alternatives_ministep.html">ts_alternatives_ministep</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">net2</span>, ego<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">options</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    1    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    1    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    1    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span></code></pre></div>
<p>This function returns a list of all possible networks after all
possible tie-changes available to ego#2 given network <code>net2</code>.
If you look closely you will see that <code>options[[2]]</code> equals
the original network (i.e. ego#2 decided not to change any tie).</p>
</div>
<div class="section level3">
<h3 id="network-statistics">2.3. Network statistics<a class="anchor" aria-label="anchor" href="#network-statistics"></a>
</h3>
<p>Which option will ego#2 choose? Naturally this will depend on which
network characteristics (or statistics) ego#2 finds relevant. Let us
suppose that ego#2 bases its decision solely on the number of ties it
sends to others and the number of reciprocated ties it has with
others.</p>
<p>Let us count the number of ties ego#2 sends to alters.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_degree.html">ts_degree</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">options</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, ego<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>And in the second (original) option:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_degree.html">ts_degree</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">options</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, ego<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>In the package <code>RsienaTwoStep</code> there are functions for the
following network statistics <span class="math inline">\(s\)</span> (see
<span class="citation">Ripley et al. (2022)</span> Chapter 12 for the
mathematical formulation):</p>
<ul>
<li>degree: <code><a href="../reference/ts_degree.html">ts_degree()</a></code>
</li>
<li>reciprocity: <code><a href="../reference/ts_degree.html">ts_recip()</a></code><br>
</li>
<li>outdegree activity: <code><a href="../reference/ts_degree.html">ts_outAct()</a></code>
</li>
<li>indegree activity: <code><a href="../reference/ts_degree.html">ts_inAct()</a></code>
</li>
<li>outdegree popularity: <code><a href="../reference/ts_degree.html">ts_outPop()</a></code>
</li>
<li>indegree popularity: <code><a href="../reference/ts_degree.html">ts_inPop()</a></code><br>
</li>
<li>transitivity: <code><a href="../reference/ts_degree.html">ts_transTrip()</a></code>
</li>
<li>mediated transitivity: <code><a href="../reference/ts_degree.html">ts_transMedTrip()</a></code><br>
</li>
<li>transitive reciprocated triplets:
<code><a href="../reference/ts_degree.html">ts_transRecTrip()</a></code>
</li>
<li>number of three-cycles: <code><a href="../reference/ts_degree.html">ts_cycle3()</a></code>
</li>
</ul>
<p>Naturally, you are free to define your own network statistics.</p>
</div>
<div class="section level3">
<h3 id="evaluation-function">2.4. Evaluation function<a class="anchor" aria-label="anchor" href="#evaluation-function"></a>
</h3>
<p>But what evaluation value does ego#2 attach to these network
statistics and consequently to the network (in its vicinity) as a whole?
Well these are the parameters, <span class="math inline">\(\beta\)</span>, you will normally estimate with
<code><a href="https://rdrr.io/pkg/RSiena/man/siena07.html" class="external-link">RSiena::siena07()</a></code>. Let us suppose the importance for the
statistic ‘degree’ is -1 and for the statistic ‘reciprocity’ is 2.</p>
<p>So you could calculate the evaluation of the network saved in
<code>options[[2]]</code> by hand:</p>
<p><span class="math display">\[f_{eval}(\mathbf{s_{i}},\mathbf{\beta})
= \mathbf{s_i}^\mathsf{T}\mathbf{\beta} \]</span></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">*</span><span class="op">-</span><span class="fl">1</span> <span class="op">+</span> <span class="fl">0</span><span class="op">*</span><span class="fl">2</span></span>
<span><span class="co">#&gt; [1] -1</span></span></code></pre></div>
<p>or with a little help of the network statistic functions:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_degree.html">ts_degree</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">options</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, ego<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="op">-</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="../reference/ts_degree.html">ts_recip</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">options</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, ego<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">*</span><span class="fl">2</span></span>
<span><span class="co">#&gt; [1] -1</span></span></code></pre></div>
<p>Or you could use the <code><a href="../reference/ts_eval.html">ts_eval()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_eval.html">ts_eval</a></span><span class="op">(</span>net<span class="op">=</span><span class="va">options</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, ego<span class="op">=</span><span class="fl">2</span>, statistics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span><span class="op">)</span>, parameters<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">eval</span></span>
<span><span class="co">#&gt; [1] -1</span></span></code></pre></div>
<p>Now, let us calculate the evaluation of all 5 possible networks:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">options</span>, FUN<span class="op">=</span><span class="va">ts_eval</span>, ego<span class="op">=</span><span class="fl">2</span>, statistics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span><span class="op">)</span>, parameters<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">eval</span></span>
<span><span class="co">#&gt; [1] -2 -1 -2 -2  0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="choice-function">2.5. Choice function<a class="anchor" aria-label="anchor" href="#choice-function"></a>
</h3>
<p>So which option will ego#2 choose? Naturally this will be a
stochastic process. But we see the last option has the highest
evaluation. We use McFadden’s choice function (for more information see
<a href="https://en.wikipedia.org/wiki/Discrete_choice" class="external-link">wiki</a>), that
is let <span class="math inline">\(P_{ni}\)</span> be the probability
that ego <span class="math inline">\(n\)</span> chooses
network/alternative <span class="math inline">\(i\)</span>. The choice
function is then given by:</p>
<p><span class="math display">\[P_{ni} =
\frac{exp(\mathbf{s_i}^\mathsf{T}\mathbf{\beta} )}{\Sigma_{j=1}^J
exp(\mathbf{s_j}^\mathsf{T}\mathbf{\beta} )},\]</span></p>
<p>with <span class="math inline">\(s_i\)</span> a vector of the value
of each network statistics for network <span class="math inline">\(i\)</span> and <span class="math inline">\(\beta\)</span> is the vector of parameter values.
Hence, <span class="math inline">\(\mathbf{s_i}^\mathsf{T}\mathbf{\beta}\)</span> is
the value of the evaluation for network <span class="math inline">\(i\)</span>.</p>
<p>Let us force ego#2 to make a decision.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">1</span>, prob<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">eval</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"choice:"</span><span class="op">)</span> </span>
<span><span class="va">choice</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"network:"</span><span class="op">)</span></span>
<span><span class="va">options</span><span class="op">[[</span><span class="va">choice</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "choice:"</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="co">#&gt; [1] "network:"</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span></code></pre></div>
<p>If we repeat this process, that is…:</p>
<ol style="list-style-type: decimal">
<li>sample agent<br>
</li>
<li>construct possible alternative networks<br>
</li>
<li>calculate how sampled agent evaluates the possible networks<br>
</li>
<li>Let the agent pick a network, that is, let agent decide on a
tie-change<br>
</li>
<li>GO BACK TO 1 (STOPPING RULE: until you think we have made enough
ministeps)</li>
</ol>
<p>…we have an agent based model.</p>
</div>
<div class="section level3">
<h3 id="stopping-rule">2.6. Stopping rule<a class="anchor" aria-label="anchor" href="#stopping-rule"></a>
</h3>
<p>But how many ministeps do we allow? Well, normally this is estimated
by <code>siena07</code> by the <code>rate</code> parameter. If we do not
make this rate parameter conditional on actor covariates or on network
characteristics, the rate parameter can be interpreted as the average
number of ministeps each actor in the network is allowed to make before
time is up. Let us suppose the <code>rate</code> parameter is 2 . Thus
in total the number of possible ministeps will be
<code>nrow(net2)*rate</code>: 10. For a more detailed - <strong>and more
correct</strong> interpretation of the rate parameter in
<code>siena07</code> see: <a href="www.jochemtolsma.nl/courses/complete-networks/socio6">www.jochemtolsma.nl</a></p>
</div>
<div class="section level3">
<h3 id="example">2.7. Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<p>To demonstrate the network evolution:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_sims.html">ts_sims</a></span><span class="op">(</span>nsims<span class="op">=</span><span class="fl">1</span>, net<span class="op">=</span><span class="va">net2</span>, rate<span class="op">=</span><span class="fl">2</span>, statistics<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span><span class="op">)</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, p2step<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, chain <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]][[1]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[2]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[3]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[4]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[5]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[6]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    1    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[7]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    1    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[8]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    1    0    1    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[9]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    1    0</span></span>
<span><span class="co">#&gt; [4,]    1    1    1    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[10]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    1    1    0    0</span></span>
<span><span class="co">#&gt; [5,]    1    0    0    0    0</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="abm-twostep">3. ABM twostep<a class="anchor" aria-label="anchor" href="#abm-twostep"></a>
</h2>
<div class="section level3">
<h3 id="logic-1">3.1. Logic<a class="anchor" aria-label="anchor" href="#logic-1"></a>
</h3>
<p>The general logic of the ABM that allows for twosteps is very similar
to the ABM ministep model:</p>
<ol style="list-style-type: decimal">
<li>sample <strong>two</strong> agents<br>
</li>
<li>construct possible alternative networks<br>
</li>
<li>calculate how the sampled agents evaluate the possible
networks<br>
</li>
<li>Let the agents together pick the subsequent network, that is, let
agents decide on the twostep (the simultaneous two ministeps)<br>
</li>
<li>GOTO 1 (STOPPING RULE: until you think we have made enough
ministeps/twosteps)</li>
</ol>
</div>
<div class="section level3">
<h3 id="sample-two-agents">3.2. Sample two agents<a class="anchor" aria-label="anchor" href="#sample-two-agents"></a>
</h3>
<ol style="list-style-type: lower-alpha">
<li>
<strong>Simultaneity</strong>: agents are sampled randomly<br>
</li>
<li>
<strong>Strict coordination</strong>: only specific dyads are
sampled (with a specific distance between them, based on either out-,
in- or reciprocal ties)<br>
</li>
<li>
<strong>Weak coordination</strong>: agents are sampled randomly but
only specific twosteps are regarded as ‘coordinated’ twosteps and,
consequently only some of the possible alternative networks are included
in the choice set for the dyad.</li>
</ol>
</div>
<div class="section level3">
<h3 id="possible-networks-after-twostep">3.3. Possible networks after twostep<a class="anchor" aria-label="anchor" href="#possible-networks-after-twostep"></a>
</h3>
<p>If we want to allow for simultaneity, we simply let first agent1 make
all possible ministeps and then conditional on these alternative
networks let agent2 make all possible ministeps. Please note that the
order in which we let agents make the ministeps is not important. We
simple construct all the networks that could result from agent1 and
agent2 make a simultaneous ministep.</p>
<blockquote>
<p><span style="color: red;">Exception:</span><br>
With weak coordination we will assess which possible alternative
networks impact the evaluation function of both egos. Only those
possible alternative networks are regarded as the result of coordination
and included in the choice set. Thus, it is not necessarry for ego1 and
ego2 to be connected at time1 but then they should at least be connected
at time2 in such a way that they influence each others evaluation
function.<br>
The implementation in the current version of <code>RsieneTwoStep</code>
is, however, a bit different. With weak coordination we simple assess
the distance between ego1 and ego2 at time1 and time2. If at eithter
time1 <em>or</em> time2 the distance is within the set threshold, we
regard the twostep as a coordinated twostep.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="network-statistics-1">3.4. Network statistics<a class="anchor" aria-label="anchor" href="#network-statistics-1"></a>
</h3>
<p>We use the same network statistics as for the ABM ministep. But
please note, that not all existing network statistics of
<code>RSiena</code> make sense. See for example the figure below.
Suppose the evaluation of the transitive triad for actor <em>i</em>
depends on whether path <em>i</em> to <em>j</em> was the closing path
(i.e., created after path <em>h</em> to <em>j</em>) or not. In a
twostep, both ties may be created simultaneously and we cannot
distinguish these two routes.</p>
<div class="figure">
<img src="1.Introduction_RsienaTwoStep_files/figure-html/unnamed-chunk-16-1.png" alt="twostep versus ministeps" width="672"><p class="caption">
twostep versus ministeps
</p>
</div>
<p><br></p>
<p><em>note: Dashed arrows represent ministeps (long dash) or twostep
(short dash); solid arrows represent initial ties (grey) or created ties
(red).</em></p>
</div>
<div class="section level3">
<h3 id="evaluation-function-1">3.5. Evaluation function<a class="anchor" aria-label="anchor" href="#evaluation-function-1"></a>
</h3>
<p>We start by letting each involved agent evaluate all possible
networks based on the individual evaluation functions. Thus agent1 gives
an evaluation and agent2 gives an evaluation.<br>
Next we have to decide how to combine the separate evaluations of the
two agents. For now, in <code>RsienaTwoStep</code>, we simply take the
mean of the two separate evaluations as the final evaluation score.</p>
</div>
<div class="section level3">
<h3 id="choice-function-1">3.6. Choice function<a class="anchor" aria-label="anchor" href="#choice-function-1"></a>
</h3>
<p>Here we follow the same logic as before. If we know the evaluation
score of each network we simply apply a Mc Fadden’s choice function.
That is, the actors together ‘decide’ on the future network out of the
possible alternative networks in the choice set, given the combined
evaluation of these networks. Thus we see the dyad formed by agent1 and
agent2 as the decision agent. Please not that agents (or rather the
dyad) thus favor the network with the highest combined ‘utility’ score.
This is not necessarily the network that would give one of the two
agents the highest satisfaction.</p>
</div>
<div class="section level3">
<h3 id="stopping-rule-1">3.7. Stopping rule<a class="anchor" aria-label="anchor" href="#stopping-rule-1"></a>
</h3>
<p>Once again the logic is exactly similar. However, we count a twostep
as two ministeps. Thus if each actor is allowed to make on average 8
ministeps, actors are allowed to make on average 4 twosteps.</p>
</div>
<div class="section level3">
<h3 id="example-1">3.8. Example<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_sims.html">ts_sims</a></span><span class="op">(</span>nsims <span class="op">=</span> <span class="fl">1</span>, net <span class="op">=</span> <span class="va">net2</span>, rate <span class="op">=</span> <span class="fl">2</span>, statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span><span class="op">)</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, p2step<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>, chain <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]][[1]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[2]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[3]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[4]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    1    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    1    0    0</span></span>
<span><span class="co">#&gt; [3,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[5]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    1    0    1    0</span></span>
<span><span class="co">#&gt; [2,]    1    0    1    0    0</span></span>
<span><span class="co">#&gt; [3,]    0    1    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="abm-simstep">4. ABM simstep<a class="anchor" aria-label="anchor" href="#abm-simstep"></a>
</h2>
<div class="section level3">
<h3 id="logic-2">4.1. Logic<a class="anchor" aria-label="anchor" href="#logic-2"></a>
</h3>
<p>A second way in which the ministep assumption can be relaxed is to
allow the same actor to make two ministeps simultaneously. Suppose a
triad formed by actors <em>i</em>, <em>j</em> and <em>h</em> and a tie
between <em>h</em> and <em>j</em>.</p>
<div class="figure">
<img src="1.Introduction_RsienaTwoStep_files/figure-html/unnamed-chunk-18-1.png" alt="simstep versus ministeps" width="672"><p class="caption">
simstep versus ministeps
</p>
</div>
<p><br></p>
<p><em>note: Dashed arrows represent ministeps (long dash) or simstep
(short dash); solid arrows represent initial ties (grey) or created ties
(red).</em></p>
<p>Suppose, actors evaluate transitive triplet structures positively.
Normally, under the ministep assumption, actor <em>i</em> should first
make a tie to actor <em>h</em> (or <em>j</em>) and only when it is its
turn again to make a tie change, make a tie to actor <em>j</em> (or
<em>h</em>). Naturally, in larger networks a lot could have happened in
the mean time. Given the network structure at the time, actor <em>i</em>
is allowed to make the second ministep, actor <em>i</em> may not favor
making the additional tie to actor <em>j</em> (or <em>h</em>)
anymore.<br>
Also, actor <em>i</em> may not even want to create a tie to actor
<em>h</em> or <em>j</em> if it is not already sure it can close the
triad immediately afterwards (or even simultaneously). Naturally, in
real life situations, it is not that strange to create multiple ties at
(almost) the same time. See for example the paper on the impact of Kudos
on running behavior <span class="citation">(Franken, Bekhuis, and Tolsma
2023)</span>. If you are on Strava (or on any other social media for
that matter), it is very common to give multiple kudos (of likes) to
different people in your network at - more or less - the same time.</p>
</div>
<div class="section level3">
<h3 id="possible-networks-after-simstep">4.2. Possible networks after simstep<a class="anchor" aria-label="anchor" href="#possible-networks-after-simstep"></a>
</h3>
<p>Simply all networks that could arise after two sequential ministeps
made by one actor (including the no change option). Please note that the
choice set only contains unique network configurations.</p>
</div>
<div class="section level3">
<h3 id="network-statistics-2">4.3. Network statistics<a class="anchor" aria-label="anchor" href="#network-statistics-2"></a>
</h3>
<p>We use the same network statistics as for the ABM ministep. But
please note, that not all existing network statistics of
<code>RSiena</code> make sense. See for example the figure above.
Suppose the evaluation of the transitive triad for actor <em>i</em>
depends on whether path <em>i</em> to <em>j</em> was the closing path or
the path <em>i</em> to <em>h</em>. In a simstep, both ties may be
created simultaneously and we cannot distinguish these two routes.</p>
</div>
<div class="section level3">
<h3 id="evaluation-function-2">4.4. Evaluation function<a class="anchor" aria-label="anchor" href="#evaluation-function-2"></a>
</h3>
<p>Identical to ABM ministep.</p>
</div>
<div class="section level3">
<h3 id="choice-function-">4.5. Choice function.<a class="anchor" aria-label="anchor" href="#choice-function-"></a>
</h3>
<p>Identical to ABM ministep.</p>
</div>
<div class="section level3">
<h3 id="stopping-rule-2">4.6. Stopping rule<a class="anchor" aria-label="anchor" href="#stopping-rule-2"></a>
</h3>
<p>Once again the logic is exactly similar. However, we count a simstep
as two ministeps. Thus if each actor is allowed to make on average 8
ministeps, actors are allowed to make on average 4 simsteps.</p>
</div>
<div class="section level3">
<h3 id="example-2">4.7. Example<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_sims.html">ts_sims</a></span><span class="op">(</span>nsims <span class="op">=</span> <span class="fl">1</span>, net <span class="op">=</span> <span class="va">net2</span>, rate <span class="op">=</span> <span class="fl">2</span>, statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span>, <span class="va">ts_outAct</span><span class="op">)</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, p2step<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, chain <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [[1]][[1]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    0    0    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[2]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    1    0    1    0    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[3]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    1    0    1    1    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[4]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    0    1    1    0</span></span>
<span><span class="co">#&gt; [2,]    1    0    1    1    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    1    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[1]][[5]]</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span><span class="co">#&gt; [1,]    0    1    1    1    1</span></span>
<span><span class="co">#&gt; [2,]    1    0    1    1    1</span></span>
<span><span class="co">#&gt; [3,]    1    0    0    0    0</span></span>
<span><span class="co">#&gt; [4,]    1    1    0    0    0</span></span>
<span><span class="co">#&gt; [5,]    0    0    0    0    0</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="network-census">5. Network census<a class="anchor" aria-label="anchor" href="#network-census"></a>
</h2>
<div class="section level3">
<h3 id="simulate-networks">5.1. Simulate networks<a class="anchor" aria-label="anchor" href="#simulate-networks"></a>
</h3>
<p>Let us simulate five times the outcome of a ABM twostep process and
only save the final network</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_sims.html">ts_sims</a></span><span class="op">(</span>nsims <span class="op">=</span> <span class="fl">5</span>, net <span class="op">=</span> <span class="va">net2</span>, rate <span class="op">=</span> <span class="fl">2</span>, statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ts_degree</span>, <span class="va">ts_recip</span><span class="op">)</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, p2step<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, chain <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dyad-and-triad-configurations">5.2. Dyad and triad configurations<a class="anchor" aria-label="anchor" href="#dyad-and-triad-configurations"></a>
</h3>
<p>Now we want to count the dyad and triad configurations.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_dyads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_dyads.html">ts_dyads</a></span><span class="op">(</span><span class="va">nets</span>, forplot <span class="op">=</span> <span class="cn">FALSE</span>, simtype<span class="op">=</span><span class="st">"twostep: random"</span><span class="op">)</span>  </span>
<span><span class="va">df_triads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_dyads.html">ts_triads</a></span><span class="op">(</span><span class="va">nets</span>, forplot <span class="op">=</span> <span class="cn">FALSE</span>, simtype<span class="op">=</span><span class="st">"twostep: random"</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_dyads</span></span>
<span><span class="va">df_triads</span></span>
<span><span class="co">#&gt;   Mut Asym Null            type</span></span>
<span><span class="co">#&gt; 1   1    2    7 twostep: random</span></span>
<span><span class="co">#&gt; 2   3    3    4 twostep: random</span></span>
<span><span class="co">#&gt; 3   3    0    7 twostep: random</span></span>
<span><span class="co">#&gt; 4   2    3    5 twostep: random</span></span>
<span><span class="co">#&gt; 5   1    1    8 twostep: random</span></span>
<span><span class="co">#&gt;   003 012 102 021D 021U 021C 111D 111U 030T 030C 201 120D 120U 120C 210 300</span></span>
<span><span class="co">#&gt; 1   3   3   2    1    0    0    1    0    0    0   0    0    0    0   0   0</span></span>
<span><span class="co">#&gt; 2   0   0   4    1    0    1    1    1    0    0   0    0    0    1   1   0</span></span>
<span><span class="co">#&gt; 3   3   0   5    0    0    0    0    0    0    0   2    0    0    0   0   0</span></span>
<span><span class="co">#&gt; 4   0   5   1    0    0    0    1    1    0    0   1    0    0    1   0   0</span></span>
<span><span class="co">#&gt; 5   5   2   2    0    0    0    1    0    0    0   0    0    0    0   0   0</span></span>
<span><span class="co">#&gt;              type</span></span>
<span><span class="co">#&gt; 1 twostep: random</span></span>
<span><span class="co">#&gt; 2 twostep: random</span></span>
<span><span class="co">#&gt; 3 twostep: random</span></span>
<span><span class="co">#&gt; 4 twostep: random</span></span>
<span><span class="co">#&gt; 5 twostep: random</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="violin-plots">5.3. Violin plots<a class="anchor" aria-label="anchor" href="#violin-plots"></a>
</h3>
<p>If you want to make violin plots of these census, it is best to set
the option <code>forplot</code> to <code>TRUE</code>.</p>
<p>Just as an example:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_dyads2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_dyads.html">ts_dyads</a></span><span class="op">(</span><span class="va">nets</span>, forplot <span class="op">=</span> <span class="cn">TRUE</span>, simtype<span class="op">=</span><span class="st">"twostep: random"</span><span class="op">)</span>  </span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 4.2.2</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df_dyads2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, fill<span class="op">=</span><span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html" class="external-link">geom_violin</a></span><span class="op">(</span>position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="external-link">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>               geom <span class="op">=</span> <span class="st">"errorbar"</span>,</span>
<span>               fun.max <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>               fun.min <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>               width<span class="op">=</span><span class="fl">.1</span>,</span>
<span>               color<span class="op">=</span><span class="st">"red"</span>, position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="external-link">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>               geom <span class="op">=</span> <span class="st">"point"</span>,</span>
<span>               color<span class="op">=</span><span class="st">"red"</span>, position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">'dyad configuration'</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">'count'</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="1.Introduction_RsienaTwoStep_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<!---note to self: two sequential ministeps is not the same as two simultaneous ministeps! RsienaTwoStep only impliments simultaneity.-->
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-FRANKEN2023151" class="csl-entry">
Franken, Rob, Hidde Bekhuis, and Jochem Tolsma. 2023. <span>“Kudos Make
You Run! How Runners Influence Each Other on the Online Social Network
Strava.”</span> <em>Social Networks</em> 72: 151–64. https://doi.org/<a href="https://doi.org/10.1016/j.socnet.2022.10.001" class="external-link">https://doi.org/10.1016/j.socnet.2022.10.001</a>.
</div>
<div id="ref-ripley2022manual" class="csl-entry">
Ripley, Ruth M, Tom AB Snijders, Zsófia Boda, András Vörös, and Paulina
Preciado. 2022. <em>Manual for SIENA Version 4.0 (Version August 11,
2022)</em>. University of Oxford, Department of Statistics, Nuffield
College. <a href="http://www.stats.ox.ac.uk/~snijders/siena/RSiena_manual.pdf" class="external-link">http://www.stats.ox.ac.uk/~snijders/siena/RSiena_manual.pdf</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jochem Tolsma.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
